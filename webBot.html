function appendMessage(content, className, isImage = false) {
    const message = document.createElement('div');
    message.classList.add('message', className);

    if (isImage) {
        const img = document.createElement('img');
        img.src = content;
        message.appendChild(img);
    } else {
        const text = document.createElement('span');
        text.textContent = content;
        message.appendChild(text);
    }

    chatWindow.appendChild(message);

    // 強制滾動到最新訊息，使用更兼容的方式
    setTimeout(() => {
        chatWindow.scrollTo({
            top: chatWindow.scrollHeight,
            behavior: 'smooth', // 添加平滑滾動
        });
    }, 100);
}
